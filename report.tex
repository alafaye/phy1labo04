% Nag is used for debug
\RequirePackage[l2tabu, orthodox]{nag}
\documentclass[a4paper,french,twoside,10pt]{report}
%\documentclass[a4paper,twoside,10pt]{article}
%\usepackage[bookman]{quotchap}

\usepackage[bindingoffset=1.5cm,centering,includeheadfoot,margin=3cm]{geometry}

%\frenchspacing
\usepackage[frenchb]{babel}
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage[pdftex]{graphicx}
%\usepackage{subfig}

\usepackage[protrusion=true,expansion=true]{microtype}

\usepackage{fancybox}
\usepackage{shadow}
\usepackage{xspace}
\usepackage{acronym}

% Maths enhancing
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsthm}
\usepackage{dsfont}

\usepackage{algorithm2e}

% JP : automatic line return after paragraph
\makeatletter
\renewcommand\paragraph{\@startsection{paragraph}{4}{\z@}%
    {-3.25ex\@plus -1ex \@minus -.2ex}%
    {1.5ex \@plus .2ex}%
{\normalfont\normalsize\bfseries}}
\makeatother

% JP : use amsthm package and define some useful commands
\newtheorem{theorem}{Theorem}
\newtheorem{definition}{Definition}
\newtheorem{proposition}{Proposition}

%\usepackage[right]{eurosym}
\usepackage{lmodern} % new latin extended computer modern font}, use with T1
%\usepackage{pxfonts} % has replaced palatino
%\usepackage{cmbright}

\usepackage{listings}

%\usepackage{booktabs}
%\usepackage{array}

\usepackage[allowlitunits]{siunitx}
% Try $20\micro\seconds$

%\addtolength{\oddsidemargin}{-1cm}
%\addtolength{\evensidemargin}{-1cm}
%\addtolength{\textwidth}{+2cm}
%\usepackage{showframe}

%\usepackage{lastpage}
% for \pageref{LastPage}

% fancy header
\usepackage{fancyhdr}
\pagestyle{fancy}
%\pagestyle{plain} % Imprime simplement le numero de page centre en bas
%\pagestyle{headings}
\fancyhf{} % clear default header and footer

\fancyhead[LE,RO]{\textit{\nouppercase{\leftmark}}}
%\fancyhead[LO,RE]{\textit{\nouppercase{\thepage{} of \pageref{LastPage}}}}
\fancyhead[CE,CO]{}
\fancyfoot[C]{--\thepage--}
\setlength{\headheight}{14pt}

\newcommand\Hrule{\noindent\rule{\linewidth}{1.5pt}}
%\AL: to add abs and norm for fracs
%\DeclarePairedDelimiter\abs{\lvert}{\rvert}%
%\DeclarePairedDelimiter\norm{\lVert}{\rVert}%
\usepackage[pdftex,
    pdfauthor={Alexandre Lafaye},
    pdftitle={Laboratoire PHY1 E4},
    pdfsubject={},
    pdfkeywords={rapport,laboratoire,HEIG-VD,PYH1,Metrologie},
pdfcreator=pdflatex]{hyperref}
\hypersetup{colorlinks, citecolor=black, filecolor=black, linkcolor=black, urlcolor=black}

\newcommand{\weblink}[2]{\href{#1}{\url{#1}: \textsc{#2}}}

%Maths shortcuts
%\newcommand{\R}{\mathbb{R}}
%\newcommand{\E}{\mathbb{E}}
%\newcommand{\N}{\mathbb{N}}
%\newcommand{\Var}{\mathrm{Var}}
%\newcommand{\Cov}{\mathrm{Cov}}
%\newcommand{\Prob}{\mathbb{P}}
%\newcommand{\trace}{\mathbb{\text{trace}}}
%\def\mathbi#1{\textbf{\em #1}}
%%\def\mathi#1{\em #1}
%\newcommand{\Z}{\mathbi{Z}_2}
%\newcommand{\kMeans}{{\em k}-Means\xspace}
%\newcommand{\kmeans}{{\em k}-means\xspace}
%\newcommand{\kmeanspp}{{\em k}-means$++$\xspace}
%\newcommand{\captionwidth}{0.9\textwidth}

% index stuff
\usepackage{tocbibind} % Index in TOC
%\usepackage{makeidx}
%\usepackage{showidx} % show index entries in margin
%\makeindex

%\newcommand{\bib}[4]{\item{\textsc{#1}, \emph{#2}, #3\\\hspace{2em}#4}}

% ---------------------------------------------------------

\newcommand{\titleinfo}{Laboratoire de Physique E4}
\author{Alexandre Lafaye}
\date{4 Avril 2016}
\title{\titleinfo}

% Margins for handwritten notes
%\addtolength{\oddsidemargin}{-2cm}
%\addtolength{\evensidemargin}{-2cm}
%\addtolength{\textwidth}{-2cm}

\usepackage{color}
\definecolor{Brown}{cmyk}{0,0.81,1,0.60}
\definecolor{OliveGreen}{cmyk}{0.64,0,0.95,0.40}
\definecolor{CadetBlue}{cmyk}{0.62,0.57,0.23,0}
\definecolor{lightlightgray}{cmyk}{0,0,0,0.02}
\definecolor{gray}{cmyk}{0,0,0,0.8}

% LaTeX magic: make sections and parts have a cleardoublepage
%\let\stdsection\section
%\renewcommand*\section{\cleardoublepage\stdsection}

\begin{document}
% JP
%\frontmatter

\lstset{
    language=Python,                             % Code langugage
    basicstyle=\ttfamily,                   % Code font, Examples: \footnotesize, \ttfamily
    keywordstyle=\color{OliveGreen},        % Keywords font ('*' = uppercase)
    commentstyle=\color{gray},              % Comments font
    numbers=left,                           % Line nums position
    numberstyle=\tiny,                      % Line-numbers fonts
    stepnumber=1,                           % Step between two line-numbers
    numbersep=5pt,                          % How far are line-numbers from code
    backgroundcolor=\color{lightlightgray}, % Choose background color
    frame=none,                             % A frame around the code
    tabsize=2,                              % Default tab size
    captionpos=b,                           % Caption-position = bottom
    breaklines=true,                        % Automatic line breaking?
    breakatwhitespace=false,                % Automatic breaks only at whitespace?
    showspaces=false,                       % Dont make spaces visible
    showtabs=false,                         % Dont make tabls visible
    morekeywords={uint32_t,uint8_t,uint16_t,time_spec_t,size_t,
    clock_config_t},
}
\pagestyle{empty}
\pagenumbering{roman}
\begin{titlepage}
    \null\vfil
    \begin{flushleft}
	\begin{center}
	    \Huge \textbf{\titleinfo}
	\end{center}
    \end{flushleft}
    \par
    \hrule height 4pt
    \par
    \begin{flushright}
	\large
	\textsl{Rapport de stage} \par
    \end{flushright}
    \vspace{\fill}
    \vspace*{\stretch{1}}

    \begin{center}
	\Large
	\textsc{Colin Bairoch, Julia Cosandier, Alexandre Lafaye\\
	    %\normalsize
	HEIG-VD -- 2016} \\
	\href{mailto:julia.cosandier@heig-vd.ch}{julia.cosandier@heig-vd.ch}
	\href{mailto:colin.bairoch@heig-vd.ch}{colin.bairoch@heig-vd.ch}
	\href{mailto:alexandre.lafaye@epfl.ch}{alexandre.lafaye@epfl.ch}
    \end{center}
    \vspace{\fill}
    \vspace*{\stretch{2}}
    \begin{center}
	\large
	Supervised by: \\
	\vspace{\fill}
	Ioan Balin -- HEIG-VD\\
	\href{http://heig-vd.ch/}{http://heig-vd.ch/} \\
    \end{center}
    \begin{center}
	\large
	Mirko Croci -- EPFL \\
	\href{http://heig-vd.ch/}{http://heig-vd.ch/} \\
    \end{center}

    \vspace{\fill}
    \vspace*{\stretch{2}}

    \begin{figure}[!h]
	\centering
	\parbox{1.4in}{
	\includegraphics[height=4em]{logo_heig_h80.jpg}}
    \end{figure}

    \vspace*{1cm}
\end{titlepage}

\pagestyle{fancy}

\tableofcontents

\newpage

\begingroup
\renewcommand{\cleardoublepage}{}
\renewcommand{\clearpage}{}

\section*{Introduction}
\addcontentsline{toc}{section}{Introduction}
\markboth{Introduction}{}
\include{intro}
\newpage

\pagenumbering{arabic}

\section{Théorie}
\addcontentsline{toc}{section}{Théorie}
\markboth{Théorie}{}
\include{theorie}
\newpage

\section{Manipulations}
\addcontentsline{toc}{section}{Théorie}
\markboth{Théorie}{}
\include{manipulation}
\newpage

\section{Conclusion}
\addcontentsline{toc}{section}{Conclusion}
\markboth{Conclusion}{}
\include{concl}
\newpage

\section{Annexe}
\addcontentsline{toc}{section}{Annexe}
\markboth{Annexe}{}
\include{annexe}

\endgroup

\end{document}
